<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Advanced Objects &mdash; yt v1.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:   '../',
          VERSION:    '1.0',
          COLLAPSE_MODINDEX: false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/interface.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="contents" title="Global table of contents" href="../contents.html" />
    <link rel="index" title="Global index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="yt v1.0 documentation" href="../index.html" />
    <link rel="up" title="A Short Tutorial" href="index.html" />
    <link rel="next" title="Projections" href="projections.html" />
    <link rel="prev" title="Automated Plotting" href="automated_plotting.html" />
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="projections.html" title="Projections"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="automated_plotting.html" title="Automated Plotting"
             accesskey="P">previous</a> |</li>
    <li><a href="http://yt.enzotools.org/">yt</a> &raquo;</li>
    
        <li><a href="../index.html">yt v1.0 documentation</a> &raquo;</li>

          <li><a href="index.html" accesskey="U">A Short Tutorial</a> &raquo;</li>
      </ul>
    </div>
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  
  <div class="section">
<h1 id="advanced-objects">Advanced Objects<a class="headerlink" href="#advanced-objects" title="Permalink to this headline">¶</a></h1>
<p>So we&#8217;ve seen simple objects already &#8211; sphere, profiles, and regions.
There are two other types of objects that are fairly cool, as well, and
they behave the same way all the others do &#8211; you can get any field from them,
profile them, all of that, right from the command line like you would a sphere
or a region.</p>
<div class="section">
<h2 id="cutting-plane"><span id="index-0"></span>Cutting Plane<a class="headerlink" href="#cutting-plane" title="Permalink to this headline">¶</a></h2>
<p>The first of these is the cutting plane.  Let&#8217;s say you&#8217;re doing some
collapse-based problem, where you end up with a vector that describes the
angular momentum.  By feeding this vector into the cutting plane object, you can
create an object that is sliced using that vector as the normal to the cutting
plane.  (For more information about how this is done, see the source code.)
An interface to this is available through raven.:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cutting_plane</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">h</span><span class="o">.</span><span class="n">cutting</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.3</span><span class="p">,</span><span class="mf">0.4</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pc</span><span class="o">.</span><span class="n">add_cutting_plane</span><span class="p">(</span><span class="s">&quot;Density&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.3</span><span class="p">,</span><span class="mf">0.4</span><span class="p">],</span> <span class="n">center</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">])</span>
</pre></div>
<p>These two statements create identical cutting-plane objects.  The latter
also prepares a plot to display the object, however.  Each of these objects
is uniquely determined by a normal vector and a point on the plane; we have
supplied the normal vector {0.1, 0.3, 0.4} and the center point of the system.
(Note that the normal vector need not be a unit vector, as it will be normalized
during the object instantiation.)  An appropriate &#8216;up&#8217; vector is guessed at
and then used to define the transformed coordinate system.</p>
</div>
<div class="section">
<h2 id="extracted-regions"><span id="index-1"></span>Extracted Regions<a class="headerlink" href="#extracted-regions" title="Permalink to this headline">¶</a></h2>
<p>One of the other interesting data types is mostly only useful for profiles in
one and two dimensions.  By whatever criteria you like, you can extract a subset
of any 3D data object.  What this means is that you can apply &#8216;cuts&#8217; to the data &#8211;
whether it be by some tracer field or even just by a minimumt temperature &#8211;
and then receive a fully-function data object.</p>
<p>So for the next example, we will presuppose that we started out with two
galaxies, one of which was pre-populated with the BaryonField &#8220;GalaxyOne&#8221;
and the other with &#8220;GalaxyTwo&#8221;.  As they collide, the gas will mix.  If we
wanted to profile all the gas that originated in one galaxy, we could create
a data object:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">import</span> <span class="nn">numpy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gal1_region</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">h</span><span class="o">.</span><span class="n">sphere</span><span class="p">([</span><span class="mf">0.25</span><span class="p">,</span><span class="mf">0.25</span><span class="p">,</span><span class="mf">0.25</span><span class="p">],</span> <span class="mf">1.0</span><span class="o">/</span><span class="n">a</span><span class="p">[</span><span class="s">&quot;mpc&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indices_we_want</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">gal1_region</span><span class="p">[</span><span class="s">&quot;GalaxyTwo&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">1e-3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gal1_mixed</span> <span class="o">=</span> <span class="n">gal1_region</span><span class="o">.</span><span class="n">extract_region</span><span class="p">(</span><span class="n">indices_we_want</span><span class="p">)</span>
</pre></div>
<p>We now have a new data source that only contains the points of interest &#8211;
only the points where the contribution from the second galaxy is greater than
0.001, and we can then feed that as a data source into a Binned2DProfile.
Note that we used numpy here.  yt uses numpy behind the scenes for just about
everything, and we have been, too, when we&#8217;ve been using our data.  The &#8216;where&#8217;
command creates a list of indices, which can then get fed into an array accessor
method, and that&#8217;s the functionality we use here.</p>
</div>
</div>
<div class="section">
<h1 id="derived-quantities"><span id="index-2"></span>Derived Quantities<a class="headerlink" href="#derived-quantities" title="Permalink to this headline">¶</a></h1>
<p>Associated with a given data object, one can imagine various quantities being
described.  Several of these are already included in yt, and more can be added.
To access a derived quantity, the property &#8216;quantities&#8217; is available in a given
data object.  It acts as a dictionary, returning callable functions.:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">L_vec</span> <span class="o">=</span> <span class="n">gal1_region</span><span class="o">.</span><span class="n">quantities</span><span class="p">[</span><span class="s">&quot;AngularMomentumVector&quot;</span><span class="p">]()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">com</span> <span class="o">=</span> <span class="n">gal1_region</span><span class="o">.</span><span class="n">quantities</span><span class="p">[</span><span class="s">&quot;CenterOfMass&quot;</span><span class="p">]()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">avg_T</span> <span class="o">=</span> <span class="n">gal1_region</span><span class="o">.</span><span class="n">quantities</span><span class="p">[</span><span class="s">&quot;WeightedAverageQuantity&quot;</span><span class="p">](</span><span class="s">&quot;Temperature&quot;</span><span class="p">,</span> \
<span class="gp">... </span>                                                          <span class="s">&quot;CellMassMsun&quot;</span><span class="p">)</span>
</pre></div>
<p>All derived quantities accept the parameter <tt class="xref docutils literal"><span class="pre">lazy_reader</span></tt>, which
tells the function to attempt to operate in a memory-conservative fashion &#8211;
reading and then flushing the data back to disk.  This is not possible for all
functions, notably the <tt class="xref docutils literal"><span class="pre">IsBound()</span></tt> function, which checks for
gravitationally-bound status.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><img class="logo" src="../_static/yt_icon.png" alt="Logo"/></p>
            <h3>Table Of Contents</h3>
            <ul>
<li><a class="reference" href="">Advanced Objects</a><ul>
<li><a class="reference" href="#cutting-plane">Cutting Plane</a></li>
<li><a class="reference" href="#extracted-regions">Extracted Regions</a></li>
</ul>
</li>
<li><a class="reference" href="#derived-quantities">Derived Quantities</a></li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="automated_plotting.html" title="previous chapter">Automated Plotting</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="projections.html" title="next chapter">Projections</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/tutorial/advanced_objects.txt">Show Source</a></li>
            </ul>
            <h3>Quick search</h3>
            <form class="search" action="../search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="projections.html" title="Projections"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="automated_plotting.html" title="Automated Plotting"
             accesskey="P">previous</a> |</li>
    <li><a href="http://yt.enzotools.org/">yt</a> &raquo;</li>
    
        <li><a href="../index.html">yt v1.0 documentation</a> &raquo;</li>

          <li><a href="index.html" accesskey="U">A Short Tutorial</a> &raquo;</li>
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2008, Matthew J. Turk.
      Last updated on Jul 18, 2008.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
    </div>
  </body>
</html>